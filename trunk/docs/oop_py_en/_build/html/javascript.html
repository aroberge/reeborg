<!DOCTYPE html>


<html>
  <head>
    <meta charset="utf-8"> 
    
    <title>4. Javascript &mdash; Object-Oriented Programming in Python</title>
    
    <link rel="stylesheet" href="_static/reeborg.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="Object-Oriented Programming in Python" href="index.html" />
    <link rel="next" title="5. Modulo operator" href="modulo.html" />
    <link rel="prev" title="3. Turn right ??" href="turn_right2.html" /> 
  
  <script>
    // intelligent scrolling of the sidebar content
    // copied from the sphinx website
    $(window).scroll(function() {
    var sb = $('.sphinxsidebarwrapper');
    var win = $(window);
    var sbh = sb.height();
    var offset = $('.sphinxsidebar').position()['top'];
    var wintop = win.scrollTop();
    var winbot = wintop + win.innerHeight();
    var curtop = sb.position()['top'];
    var curbot = curtop + sbh;
    // does sidebar fit in window?
    if (sbh < win.innerHeight()) {
          // yes: easy case -- always keep at the top
          sb.css('top', $u.min([$u.max([0, wintop - offset - 10]),
                                $(document).height() - sbh - 200]));
        } else {
          // no: only scroll if top/bottom edge of sidebar is at
          // top/bottom edge of window
          if (curtop > wintop && curbot > winbot) {
              sb.css('top', $u.max([wintop - offset - 10, 0]));
          } else if (curtop < wintop && curbot < winbot) {
              sb.css('top', $u.min([winbot - sbh - offset - 20,
                            $(document).height() - sbh - 200]));
          }
        }
    });
    </script>
  
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
             <a href="modulo.html" title="5. Modulo operator"
             accesskey="N">next</a></li>
        <li class="right" >
             <a href="turn_right2.html" title="3. Turn right ??"
             accesskey="P">previous</a> |</li>
        <li><a class="logo" href="../../index_en.html" class="fake_button">
              <img class="logo"  src="_static/robot_e.png" alt="Logo"/>Reeborg's World
            </a></li>
        <li><a href="index.html">Object-Oriented Programming in Python</a></li> 
      </ul>
    </div>
  
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="turn_right2.html"
                        title="previous chapter">3. Turn right ??</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="modulo.html"
                        title="next chapter">5. Modulo operator</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/javascript.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="javascript">
<h1>4. Javascript<a class="headerlink" href="#javascript" title="Permalink to this headline">Â¶</a></h1>
<p>Remember when you ran this code?</p>
<div class="highlight-py3"><div class="highlight"><pre><span class="n">r</span> <span class="o">=</span> <span class="n">UsedRobot</span><span class="p">()</span>
<span class="n">inspect</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
</pre></div>
</div>
<p>We are going to do the equivalent with Javascript.</p>
<p>At the very top of the Reeborg&#8217;s World window, click to select
Javascript instead of Python; it does not matter if you choose the
strict version or the regular one.  Then run the following code:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">UsedRobot</span><span class="p">();</span>
<span class="nx">inspect</span><span class="p">(</span><span class="nx">r</span><span class="p">);</span>
</pre></div>
</div>
<p>Here is what I see when I do this:</p>
<div class="highlight-py3"><div class="highlight"><pre><span class="n">body</span>
<span class="n">at_goal</span><span class="p">()</span>
<span class="n">at_goal_orientation</span><span class="p">()</span>
<span class="n">build_wall</span><span class="p">()</span>
<span class="n">front_is_clear</span><span class="p">()</span>
<span class="n">has_token</span><span class="p">()</span>
<span class="n">is_facing_north</span><span class="p">()</span>
<span class="n">move</span><span class="p">()</span>
<span class="n">put</span><span class="p">()</span>
<span class="n">token_here</span><span class="p">()</span>
<span class="n">right_is_clear</span><span class="p">()</span>
<span class="n">object_here</span><span class="p">()</span>
<span class="n">take</span><span class="p">()</span>
<span class="n">turn_left</span><span class="p">()</span>
</pre></div>
</div>
<p>So, nothing that starts and end with a double underscore, and we see
<tt class="docutils literal"><span class="pre">body</span></tt> as we had in the
Python code, but will also see some familiar methods like
<tt class="docutils literal"><span class="pre">at_goal()</span></tt>, <tt class="docutils literal"><span class="pre">move()</span></tt> and many others.</p>
<p>Now we are ready to look at some code.</p>
<div class="topic">
<p class="topic-title first">Do this!</p>
<p>Execute the following Javascript code and look at the result
in the Diary.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">UsedRobot</span><span class="p">();</span>
<span class="nx">view_source</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">turn_left</span><span class="p">);</span>
</pre></div>
</div>
<p>Make sure the code is exactly as written above.  Note that I use
<tt class="docutils literal"><span class="pre">view_source</span></tt> instead of <tt class="docutils literal"><span class="pre">inspect</span></tt> which, as it turns out, would
not help me at all in this case.</p>
</div>
<p>Based on the result that I see printed in Reeborg&#8217;s Diary</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">RUR</span><span class="p">.</span><span class="nx">control</span><span class="p">.</span><span class="nx">turn_left</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>my next guess is to execute the following.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">UsedRobot</span><span class="p">();</span>
<span class="nx">view_source</span><span class="p">(</span><span class="nx">RUR</span><span class="p">.</span><span class="nx">control</span><span class="p">.</span><span class="nx">turn_left</span><span class="p">);</span>
</pre></div>
</div>
<p>After doing so, I see the following:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">function</span> <span class="p">(</span><span class="nx">robot</span><span class="p">,</span> <span class="nx">no_frame</span><span class="p">){</span>
    <span class="s2">&quot;use strict&quot;</span><span class="p">;</span>
    <span class="nx">robot</span><span class="p">.</span><span class="nx">_prev_orientation</span> <span class="o">=</span> <span class="nx">robot</span><span class="p">.</span><span class="nx">orientation</span><span class="p">;</span>
    <span class="nx">robot</span><span class="p">.</span><span class="nx">_prev_x</span> <span class="o">=</span> <span class="nx">robot</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="nx">robot</span><span class="p">.</span><span class="nx">_prev_y</span> <span class="o">=</span> <span class="nx">robot</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
    <span class="nx">robot</span><span class="p">.</span><span class="nx">orientation</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>  <span class="c1">// could have used &quot;++&quot; instead of &quot;+= 1&quot;</span>
    <span class="nx">robot</span><span class="p">.</span><span class="nx">orientation</span> <span class="o">%=</span> <span class="mi">4</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">no_frame</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="nx">RUR</span><span class="p">.</span><span class="nx">control</span><span class="p">.</span><span class="nx">sound_id</span> <span class="o">=</span> <span class="s2">&quot;#turn-sound&quot;</span><span class="p">;</span>
    <span class="nx">RUR</span><span class="p">.</span><span class="nx">rec</span><span class="p">.</span><span class="nx">record_frame</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>As mentioned above, you might see something slightly different.
Here is the equivalent Python code:</p>
<div class="highlight-py3"><div class="highlight"><pre><span class="k">def</span> <span class="nf">unknown_function_name</span> <span class="p">(</span><span class="n">robot</span><span class="p">,</span> <span class="n">no_frame</span><span class="p">):</span>
    <span class="n">robot</span><span class="o">.</span><span class="n">_prev_orientation</span> <span class="o">=</span> <span class="n">robot</span><span class="o">.</span><span class="n">orientation</span>
    <span class="n">robot</span><span class="o">.</span><span class="n">_prev_x</span> <span class="o">=</span> <span class="n">robot</span><span class="o">.</span><span class="n">x</span>
    <span class="n">robot</span><span class="o">.</span><span class="n">_prev_y</span> <span class="o">=</span> <span class="n">robot</span><span class="o">.</span><span class="n">y</span>
    <span class="n">robot</span><span class="o">.</span><span class="n">orientation</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">robot</span><span class="o">.</span><span class="n">orientation</span> <span class="o">%=</span> <span class="mi">4</span>
    <span class="k">if</span> <span class="n">no_frame</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">RUR</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">sound_id</span> <span class="o">=</span> <span class="s">&quot;#turn-sound&quot;</span>
    <span class="n">RUR</span><span class="o">.</span><span class="n">rec</span><span class="o">.</span><span class="n">record_frame</span><span class="p">()</span>
</pre></div>
</div>
<p>We will come back to this code sample later; for now, remember that we were
talking about &#8220;recording frames&#8221; ... It looks as though the last instruction
is the one we were looking for.  Time to go back to coding in Python.
Select Python as the programming language at the top of Reeborg&#8217;s World window
before running the following program.</p>
<div class="topic">
<p class="topic-title first">Try this!</p>
<p>Select world <strong>Empty</strong> and run the following code to
confirm that you can add new capabilities to
Reeborg and show its effect properly at each step.</p>
<div class="highlight-py3"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Teleporter</span><span class="p">(</span><span class="n">UsedRobot</span><span class="p">):</span>

   <span class="k">def</span> <span class="nf">jump</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
      <span class="n">RUR</span><span class="o">.</span><span class="n">rec</span><span class="o">.</span><span class="n">record_frame</span><span class="p">()</span>

<span class="n">jumper</span> <span class="o">=</span> <span class="n">Teleporter</span><span class="p">()</span>
<span class="n">jumper</span><span class="o">.</span><span class="n">jump</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">jumper</span><span class="o">.</span><span class="n">jump</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="topic">
<p class="topic-title first">Your turn!</p>
<p>Design a robot class that can &#8220;hop&#8221; horizontally, only increasing
the <tt class="docutils literal"><span class="pre">x</span></tt> coordinate by 1 each time (like in a <tt class="docutils literal"><span class="pre">move</span></tt> method) but
effectively jumping over walls.  Create a robot instance and have
it solve the hurdles challenges, <strong>Hurdles 1</strong> to <strong>Hurdles 4</strong>, by going
in a straight line, straight through walls!  For each existing world,
you will first have to click on &#8220;Edit World&#8221; and
remove the robot already present.  You may find it useful to then click
on &#8220;browser:Save&#8221; so that you can reload this robot-free world if needed.
A complete solution can be written in only 7 lines of code.</p>
</div>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p>You can move the robot in the desired way by incrementing its x
variable as follows:</p>
<div class="last highlight-py3"><div class="highlight"><pre><span class="bp">self</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>  
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
             <a href="modulo.html" title="5. Modulo operator"
             >next</a></li>
        <li class="right" >
             <a href="turn_right2.html" title="3. Turn right ??"
             >previous</a> |</li>
        <li><a class="logo" href="../../index_en.html" class="fake_button">
              <img class="logo"  src="_static/robot_e.png" alt="Logo"/>Reeborg's World
            </a></li>
        <li><a href="index.html">Object-Oriented Programming in Python</a></li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 
          <a href="mailto:andre.roberge@gmail.com">AndrÃ© Roberge </a>
        
       - Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  <script> 
  $(document).ready(function() {
      $('.hint').children().hide();
      $('.hint p.admonition-title').show().css('cursor', 'pointer');
      $('.hint p.admonition-title').click( function() {$(this).siblings().show().css('cursor', 'auto');})
  });
  </script>
  </body>
</html>