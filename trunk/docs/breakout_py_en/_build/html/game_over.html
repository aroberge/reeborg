<!DOCTYPE html>


<html>
  <head>
    <meta charset="utf-8"> 
    
    <title>11. Game over! &mdash; Breakout: making a game with Python</title>
    
    <link rel="stylesheet" href="_static/reeborg.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="Breakout: making a game with Python" href="index.html" />
    <link rel="next" title="12. Brick" href="brick.html" />
    <link rel="prev" title="10. Bounding box" href="bounding_box.html" /> 
  
  <script>
    // intelligent scrolling of the sidebar content
    // copied from the sphinx website
    $(window).scroll(function() {
    var sb = $('.sphinxsidebarwrapper');
    var win = $(window);
    var sbh = sb.height();
    var offset = $('.sphinxsidebar').position()['top'];
    var wintop = win.scrollTop();
    var winbot = wintop + win.innerHeight();
    var curtop = sb.position()['top'];
    var curbot = curtop + sbh;
    // does sidebar fit in window?
    if (sbh < win.innerHeight()) {
          // yes: easy case -- always keep at the top
          sb.css('top', $u.min([$u.max([0, wintop - offset - 10]),
                                $(document).height() - sbh - 200]));
        } else {
          // no: only scroll if top/bottom edge of sidebar is at
          // top/bottom edge of window
          if (curtop > wintop && curbot > winbot) {
              sb.css('top', $u.max([wintop - offset - 10, 0]));
          } else if (curtop < wintop && curbot < winbot) {
              sb.css('top', $u.min([winbot - sbh - offset - 20,
                            $(document).height() - sbh - 200]));
          }
        }
    });
    </script>
  
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
             <a href="brick.html" title="12. Brick"
             accesskey="N">next</a></li>
        <li class="right" >
             <a href="bounding_box.html" title="10. Bounding box"
             accesskey="P">previous</a> |</li>
        <li><a class="logo" href="../../index_en.html" class="fake_button">
              <img class="logo"  src="_static/robot_e.png" alt="Logo"/>Reeborg's World
            </a></li>
        <li><a href="index.html">Breakout: making a game with Python</a></li> 
      </ul>
    </div>
  
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
              <h3>Table Of Contents</h3>
              <ul>
<li><a class="reference internal" href="#">11. Game over!</a><ul>
<li><a class="reference internal" href="#debugging-a-game">11.1. Debugging a game</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="bounding_box.html"
                        title="previous chapter">10. Bounding box</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="brick.html"
                        title="next chapter">12. Brick</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/game_over.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="game-over">
<h1>11. Game over!<a class="headerlink" href="#game-over" title="Permalink to this headline">¶</a></h1>
<p>Our game is far from being done ... but, as you know, real games do
end and it is time for us to see if we can include an ending.</p>
<div class="topic">
<p class="topic-title first">Do it!</p>
<p>Write a function called <tt class="docutils literal"><span class="pre">game_over</span></tt>.  It must pause the game,
write &#8220;Game over!&#8221; in big red letters on the screen.</p>
<p>The game must be over if the ball misses the paddle and would
bounce off the bottom of the canvas.  Do not delete any code;
instead, comment-out (by writing &#8220;#&#8221; at the beginning of a line)
any code that you no longer need.</p>
</div>
<div class="section" id="debugging-a-game">
<h2>11.1. Debugging a game<a class="headerlink" href="#debugging-a-game" title="Permalink to this headline">¶</a></h2>
<p>It is sometimes useful to change the behaviour or the apparence
of a game to help find bugs.  For example, as mentioned before,
you could write the value of one or more variables on the screen
at each frame to see if they take the value that you need.</p>
<p>Having the ball bounce from the bottom of the screen, without
having to worry about moving the paddle, can be useful when
testing some other things, like &#8220;breaking bricks&#8221; which we will
soon be able to do.  This is why I&#8217;ve used a variable named
<tt class="docutils literal"><span class="pre">DEBUG</span></tt> in my code as you will see if you click on the
hint below.  I thought it was time to do a recap and show you
the entire code including both the code in the Library and the
other editor, but without specifying what is where.</p>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<div class="last highlight-py3"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">browser</span> <span class="k">import</span> <span class="n">doc</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="k">import</span> <span class="n">pi</span>
<span class="kn">from</span> <span class="nn">browser.timer</span> <span class="k">import</span> <span class="n">set_timeout</span><span class="p">,</span> <span class="n">clear_timeout</span>

<span class="n">canvas</span> <span class="o">=</span> <span class="n">doc</span><span class="p">[</span><span class="s">&quot;game-canvas&quot;</span><span class="p">]</span>
<span class="n">ctx</span> <span class="o">=</span> <span class="n">canvas</span><span class="o">.</span><span class="n">getContext</span><span class="p">(</span><span class="s">&#39;2d&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Ball</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;red&#39;</span><span class="p">,</span> <span class="n">dx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">dy</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">radius</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dx</span> <span class="o">=</span> <span class="n">dx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dy</span> <span class="o">=</span> <span class="n">dy</span>

    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">fillStyle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">beginPath</span><span class="p">()</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">arc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">closePath</span><span class="p">()</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">fill</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">move</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dy</span>

    <span class="k">def</span> <span class="nf">overlaps_with</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span>    <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>  <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">x_min</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">)</span> <span class="ow">or</span>
                 <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">x_min</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>  <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">x_max</span><span class="p">))</span>
            <span class="ow">and</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>  <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">y_min</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">)</span> <span class="ow">or</span>
                 <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">y_min</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>  <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">y_max</span><span class="p">))</span> <span class="p">):</span>
            <span class="k">return</span> <span class="k">True</span>
        <span class="k">return</span> <span class="k">False</span>


<span class="k">class</span> <span class="nc">Paddle</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&quot;blue&quot;</span><span class="p">,</span> <span class="n">dx</span><span class="o">=</span><span class="mi">7</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dx</span> <span class="o">=</span> <span class="n">dx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">calculate_bounding_box</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">calculate_bounding_box</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x_min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y_min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x_max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y_max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>

    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">fillStyle</span> <span class="o">=</span> <span class="s">&quot;blue&quot;</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">fillRect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">move</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">calculate_bounding_box</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">clear_screen</span><span class="p">():</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">clearRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">canvas</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">canvas</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">write_help</span><span class="p">():</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="s">&quot;30px sans-serif&quot;</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">fillStyle</span> <span class="o">=</span> <span class="s">&quot;lightgrey&quot;</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">fillText</span><span class="p">(</span><span class="s">&quot;S to start the animation&quot;</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">fillText</span><span class="p">(</span><span class="s">&quot;P to pause the animation&quot;</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">150</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">fillText</span><span class="p">(</span><span class="s">&quot;Q to quit: click BEFORE editing!&quot;</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">stay_in_world</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">radius</span> <span class="ow">and</span> <span class="n">ball</span><span class="o">.</span><span class="n">dx</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">ball</span><span class="o">.</span><span class="n">dx</span> <span class="o">=</span> <span class="o">-</span><span class="n">ball</span><span class="o">.</span><span class="n">dx</span>
        <span class="n">ball</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">ball</span><span class="o">.</span><span class="n">radius</span> <span class="o">-</span> <span class="n">ball</span><span class="o">.</span><span class="n">x</span>
    <span class="k">elif</span> <span class="n">ball</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">canvas</span><span class="o">.</span><span class="n">width</span> <span class="o">-</span> <span class="n">ball</span><span class="o">.</span><span class="n">radius</span> <span class="ow">and</span> <span class="n">ball</span><span class="o">.</span><span class="n">dx</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">ball</span><span class="o">.</span><span class="n">dx</span> <span class="o">=</span> <span class="o">-</span><span class="n">ball</span><span class="o">.</span><span class="n">dx</span>
        <span class="n">ball</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="p">(</span><span class="n">canvas</span><span class="o">.</span><span class="n">width</span> <span class="o">-</span> <span class="n">ball</span><span class="o">.</span><span class="n">radius</span><span class="p">)</span> <span class="o">-</span> <span class="n">ball</span><span class="o">.</span><span class="n">x</span>
    <span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">radius</span> <span class="ow">and</span> <span class="n">ball</span><span class="o">.</span><span class="n">dy</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">ball</span><span class="o">.</span><span class="n">dy</span> <span class="o">=</span> <span class="o">-</span><span class="n">ball</span><span class="o">.</span><span class="n">dy</span>
        <span class="n">ball</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">ball</span><span class="o">.</span><span class="n">radius</span> <span class="o">-</span> <span class="n">ball</span><span class="o">.</span><span class="n">y</span>
    <span class="k">elif</span> <span class="n">ball</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;</span> <span class="n">canvas</span><span class="o">.</span><span class="n">height</span> <span class="o">-</span> <span class="n">ball</span><span class="o">.</span><span class="n">radius</span> <span class="ow">and</span> <span class="n">ball</span><span class="o">.</span><span class="n">dy</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">DEBUG</span><span class="p">:</span>
            <span class="n">ball</span><span class="o">.</span><span class="n">dy</span> <span class="o">=</span> <span class="o">-</span><span class="n">ball</span><span class="o">.</span><span class="n">dy</span>
            <span class="n">ball</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="p">(</span><span class="n">canvas</span><span class="o">.</span><span class="n">height</span> <span class="o">-</span> <span class="n">ball</span><span class="o">.</span><span class="n">radius</span><span class="p">)</span> <span class="o">-</span> <span class="n">ball</span><span class="o">.</span><span class="n">y</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">game_over</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">handle_keydown_events</span><span class="p">(</span><span class="n">ev</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">pause</span><span class="p">,</span> <span class="n">_id</span>
    <span class="k">if</span> <span class="n">ev</span><span class="o">.</span><span class="n">keyCode</span> <span class="o">==</span> <span class="mi">37</span><span class="p">:</span>   <span class="c"># left arrow</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">dx</span> <span class="o">=</span> <span class="o">-</span> <span class="nb">abs</span><span class="p">(</span><span class="n">paddle</span><span class="o">.</span><span class="n">dx</span><span class="p">)</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">move</span><span class="p">()</span>
        <span class="n">keep_paddle_in</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">ev</span><span class="o">.</span><span class="n">keyCode</span> <span class="o">==</span> <span class="mi">39</span><span class="p">:</span>   <span class="c"># right arrow</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">dx</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">paddle</span><span class="o">.</span><span class="n">dx</span><span class="p">)</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">move</span><span class="p">()</span>
        <span class="n">keep_paddle_in</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">ev</span><span class="o">.</span><span class="n">keyCode</span> <span class="o">==</span> <span class="mi">80</span><span class="p">:</span>  <span class="c"># p or P for Pause</span>
        <span class="n">pause</span> <span class="o">=</span> <span class="k">True</span>
        <span class="n">clear_timeout</span><span class="p">(</span><span class="n">_id</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">ev</span><span class="o">.</span><span class="n">keyCode</span> <span class="o">==</span> <span class="mi">81</span><span class="p">:</span>  <span class="c"># q or Q  for Quit</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">unbind</span><span class="p">(</span><span class="s">&quot;keydown&quot;</span><span class="p">)</span>
        <span class="n">canvas</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">cursor</span> <span class="o">=</span> <span class="s">&quot;default&quot;</span>
        <span class="n">clear_screen</span><span class="p">()</span>
        <span class="n">pause</span> <span class="o">=</span> <span class="k">True</span>
        <span class="n">clear_timeout</span><span class="p">(</span><span class="n">_id</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">ev</span><span class="o">.</span><span class="n">keyCode</span> <span class="o">==</span> <span class="mi">83</span> <span class="ow">and</span> <span class="n">pause</span><span class="p">:</span> <span class="c"># s or S for Start</span>
        <span class="n">pause</span> <span class="o">=</span> <span class="k">False</span>
        <span class="n">canvas</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">cursor</span> <span class="o">=</span> <span class="s">&quot;none&quot;</span>
        <span class="n">update</span><span class="p">()</span>
    <span class="n">ev</span><span class="o">.</span><span class="n">preventDefault</span><span class="p">()</span>


<span class="n">doc</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s">&quot;keydown&quot;</span><span class="p">,</span> <span class="n">handle_keydown_events</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">update</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">_id</span>
    <span class="n">clear_screen</span><span class="p">()</span>
    <span class="n">ball</span><span class="o">.</span><span class="n">move</span><span class="p">()</span>
    <span class="n">stay_in_world</span><span class="p">()</span>
    <span class="n">write_help</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">overlaps_with</span><span class="p">(</span><span class="n">paddle</span><span class="p">)</span> <span class="ow">and</span> <span class="n">ball</span><span class="o">.</span><span class="n">dy</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">ball</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="n">ball</span><span class="o">.</span><span class="n">dy</span>
        <span class="n">ball</span><span class="o">.</span><span class="n">dy</span> <span class="o">=</span> <span class="o">-</span> <span class="n">ball</span><span class="o">.</span><span class="n">dy</span>
    <span class="n">ball</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="n">paddle</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">pause</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">_id</span> <span class="o">=</span> <span class="n">set_timeout</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">tbf</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">keep_paddle_in</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">paddle</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">elif</span> <span class="n">paddle</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">paddle</span><span class="o">.</span><span class="n">width</span> <span class="o">&gt;</span> <span class="n">canvas</span><span class="o">.</span><span class="n">width</span><span class="p">:</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">canvas</span><span class="o">.</span><span class="n">width</span> <span class="o">-</span> <span class="n">paddle</span><span class="o">.</span><span class="n">width</span>

<span class="k">def</span> <span class="nf">game_over</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">pause</span>
    <span class="n">pause</span> <span class="o">=</span> <span class="k">True</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="s">&quot;100px sans-serif&quot;</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">fillStyle</span> <span class="o">=</span> <span class="s">&quot;red&quot;</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">fillText</span><span class="p">(</span><span class="s">&quot;Game over!&quot;</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>


<span class="c">#---------------</span>
<span class="n">DEBUG</span> <span class="o">=</span> <span class="k">True</span>
<span class="n">pause</span> <span class="o">=</span> <span class="k">True</span>
<span class="n">fps</span> <span class="o">=</span> <span class="mi">60</span>
<span class="n">tbf</span> <span class="o">=</span> <span class="mi">1000</span><span class="o">/</span><span class="n">fps</span>    <span class="c"># time between frames in ms</span>

<span class="n">ball</span> <span class="o">=</span> <span class="n">Ball</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">paddle</span> <span class="o">=</span> <span class="n">Paddle</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">canvas</span><span class="o">.</span><span class="n">height</span><span class="o">-</span><span class="mi">20</span><span class="p">)</span>
<span class="n">clear_screen</span><span class="p">()</span>
<span class="n">write_help</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>Compare my code with yours and make sure you understand what
any difference there may be between the two.  Even though there
are almost no comments in the code above, you should be
sufficiently familiar with it to understand what every single line does.</p>
</div>
</div>


          </div>
        </div>
      </div>  
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
             <a href="brick.html" title="12. Brick"
             >next</a></li>
        <li class="right" >
             <a href="bounding_box.html" title="10. Bounding box"
             >previous</a> |</li>
        <li><a class="logo" href="../../index_en.html" class="fake_button">
              <img class="logo"  src="_static/robot_e.png" alt="Logo"/>Reeborg's World
            </a></li>
        <li><a href="index.html">Breakout: making a game with Python</a></li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 
          <a href="mailto:andre.roberge@gmail.com">André Roberge </a>
        
       - Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  <script> 
  $(document).ready(function() {
      $('.hint').children().hide();
      $('.hint p.admonition-title').show().css('cursor', 'pointer');
      $('.hint p.admonition-title').click( function() {$(this).siblings().show().css('cursor', 'auto');})
  });
  </script>
  </body>
</html>